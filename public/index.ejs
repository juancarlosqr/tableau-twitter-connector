<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <meta http-equiv="Cache-Control" content="no-store" />
  <style type="text/css">
    .btn,.btn:hover{text-decoration:none}body{background-color:#2c3e50;color:#ecf0f1;font-family:Arial,Verdana,sans-serif;text-align:center;margin:60px auto;width:75%}#container,button{display:none}.btn{background:#3498db;background-image:-webkit-linear-gradient(top,#3498db,#2980b9);background-image:-moz-linear-gradient(top,#3498db,#2980b9);background-image:-ms-linear-gradient(top,#3498db,#2980b9);background-image:-o-linear-gradient(top,#3498db,#2980b9);background-image:linear-gradient(to bottom,#3498db,#2980b9);-webkit-border-radius:5;-moz-border-radius:5;border-radius:5px;border:1px solid #3498db;color:#fff;font-size:20px;margin:25px 0;padding:10px 20px}.btn:hover{background:#3cb0fd;background-image:-webkit-linear-gradient(top,#3cb0fd,#3498db);background-image:-moz-linear-gradient(top,#3cb0fd,#3498db);background-image:-ms-linear-gradient(top,#3cb0fd,#3498db);background-image:-o-linear-gradient(top,#3cb0fd,#3498db);background-image:linear-gradient(to bottom,#3cb0fd,#3498db)}.author{color:#95a5a6;font-size:12px}
  </style>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
  <script src="https://connectors.tableau.com/libs/tableauwdc-1.1.1.js" type="text/javascript"></script>
  <script type="text/javascript">
    !function(){var e=tableau.makeConnector();e.getColumnHeaders=function(){var e=["User","Followers","Language"],t=["string","int","string"];tableau.headersCallback(e,t)},e.getTableData=function(e){var t=[],n=e||-1,a=!1;$.ajax({url:"/twitter/followers?id="+tableau.connectionData+"&cursor="+n,dataType:"json",success:function(e){if(e.users.length>0){var n=e.users.length;for(n;n--;)t.push({User:e.users[n].screen_name,Followers:e.users[n].followers_count,Language:e.users[n].lang});a=e.next_cursor>0,tableau.dataCallback(t,e.next_cursor,a)}else{var o="No results found for this Twitter account";tableau.log(o),tableau.abortWithError(o)}},error:function(e,t,n){tableau.log("Connection error: "+e.responseText+"\n"+n),tableau.abortWithError("Error connecting to the <%= title %>")}})},tableau.registerConnector(e)}(),$(document).ready(function(){var e="<%= sessionID %>",t=$("#login"),n=$("#getData");$("#container").fadeIn(),e.length>0?n.fadeIn():t.fadeIn(),t.on("click",function(){window.location.href="/connect/twitter"}),n.on("click",function(){tableau.connectionName="<%= title %>",tableau.connectionData=e,tableau.submit()})});
  </script>
</head>
<body>
  <div id="container">
    <img src="/logo_128.png" alt="<%= title %> logo" title="<%= title %> logo" />
    <h1><%= title %></h1>
    <p>Get Followers data into Tableau</p>
    <button id="login" class="btn">Sign In with Twitter</button>
    <button id="getData" class="btn">Get Twitter Followers data</button>
    <p class="author">Juan Carlos Quintero / @juancarlosqr</p>
  <div>
</body>
</html>